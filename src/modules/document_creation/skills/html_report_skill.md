# HTML Report Creation Skill

## Overview

You can create HTML reports for users in two ways:

1. **Template-Based**: Use a pre-built template with data injection
2. **Raw HTML**: Generate complete HTML content yourself

**First time?** Call `list_report_templates` to see available templates and this guide. Once you're familiar with the data structure, you don't need to call it every time.

## When to Use Each Approach

### Use Template-Based When:
- Creating standard reports (job summaries, shipping lists, etc.)
- Data is structured and fits a known format
- Consistency with other reports matters

### Use Raw HTML When:
- Creating one-off custom reports
- User requests specific formatting (custom colors, cell highlighting, etc.)
- No suitable template exists
- Combining multiple data sources in a unique way

## Available Actions

### `create_html_report`
Creates a report from a template with injected data.

```python
# Parameters:
template_name: str      # e.g., "base_report.html"
data: dict              # Data to inject into template
title: str (optional)   # Report title
output_filename: str (optional)  # Auto-generated if not provided
```

### `save_raw_html`
Saves complete HTML content you generate.

```python
# Parameters:
content: str           # Complete HTML string
output_filename: str   # Required
```

### `list_report_templates`
Returns available templates, descriptions, and this skill guide.

## Template Data Format

When using `create_html_report`, structure your data like:

```python
data = {
    "title": "Job 6516 Summary",
    "subtitle": "Weekly Status Report",
    "summary_cards": [
        {"value": "2,450", "label": "Total Weight (tons)"},
        {"value": "89%", "label": "Complete"},
        {"value": "12", "label": "Days Left"}
    ],
    "sections": [
        {
            "heading": "Shipping Status",
            "content": "On track for delivery...",  # Plain text only, HTML is escaped
            "items": [  # Optional - omit if not needed
                {"name": "Phase 1", "status": "Complete"},
                {"name": "Phase 2", "status": "In Progress"}
            ]
        }
    ],
    "tables": [
        {
            "caption": "Drawing Counts",
            "headers": ["Type", "Count", "Status"],
            "rows": [
                ["Fabrication", 45, "Released"],
                ["Erection", 12, "Pending"]
            ]
        }
    ],
    "custom_content": "<div>Raw HTML allowed here</div>",  # Optional, renders unescaped
    "footer_note": "Generated by FabCore AI"
}
```

### Data Structure Notes

| Field | Required | Notes |
|-------|----------|-------|
| `title` | No | Falls back to "FabCore Report" if omitted |
| `subtitle` | No | Appears below title in header |
| `summary_cards` | No | Array of `{value, label}` objects |
| `sections` | No | Array with `heading`, optional `content` and `items` |
| `tables` | No | Array with `caption`, `headers`, `rows` |
| `custom_content` | No | **Only place where raw HTML is rendered** |
| `footer_note` | No | Defaults to "Generated by FabCore AI" |

### Current Limitations

- **Summary card colors**: All cards use the same styling (no custom colors yet)
- **Table cell highlighting**: Not supported - use raw HTML for colored/highlighted cells
- **Section content**: Plain text only, HTML tags are escaped. Use `custom_content` for HTML.
- **Item status colors**: Supports `Complete` (green), `In Progress` (yellow), `Pending` (gray)

## Auto-Generated Filenames

If you omit `output_filename`, the pattern is:
```
{template_name}_{YYYYMMDD}_{HHMMSS}.html
```

Example: `base_report_20260121_142035.html`

For clarity, prefer explicit filenames like `job_6516_summary_20260121.html`.

## Output Location

Reports are saved to: `~/Desktop/Fabcore/Reports/`

Always tell the user where their report was saved after creation.

## Raw HTML Best Practices

When generating raw HTML for custom formatting needs:

1. **Always include a complete document structure**:
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Report Title</title>
    <style>/* Include styles inline */</style>
</head>
<body>
    <!-- Content here -->
</body>
</html>
```

2. **Use inline styles** - External CSS won't load reliably

3. **Include print-friendly styles**:
```css
@media print {
    body { font-size: 12pt; }
    .no-print { display: none; }
}
```

## Example Workflow

```
User: "Create a summary report for job 6516"

1. Call data tools to get job information
2. Structure the data for the template (summary_cards, sections, tables)
3. Call create_html_report with data
4. Tell the user the file location
```

## Tips

- Use descriptive filenames: `job_6516_summary_20260121.html`
- Numbers in tables are auto-formatted with commas
- For complex styling (colors, highlights), use raw HTML instead of fighting the template
- `items` in sections are optional - a section can have just `heading` and `content`
